---
import type { CollectionEntry } from 'astro:content';
import type { AstroComponentFactory } from 'astro/runtime/server/index.js';
import BlogContent from './BlogContent.astro';
import Typewriter from '@components/Typewriter.astro';

interface Props {
  blogPost: CollectionEntry<'blogPosts'>;
  content: AstroComponentFactory;
}
const { data, slug } = Astro.props.blogPost;
const { title } = data;
const Content = Astro.props.content;

const dateFormatter = new Intl.DateTimeFormat('en-CA', {
  dateStyle: 'long'
});
---

<article>
  <header transition:name={`blog-title-${slug}`}>
    <div class="content">
      <time datetime={data.datePosted.toISOString()}
        >{dateFormatter.format(data.datePosted)}</time
      >
      <h1>{title}<Typewriter /></h1>
    </div>
  </header>
  <BlogContent>
    <Content />
  </BlogContent>
</article>

<style>
  article {
    margin: 0 auto 5rem;
  }
  header {
    text-align: center;
    padding: 5rem 0;
    background: var(--color-primary-600);
  }
  .content {
    max-width: var(--max-width);
    margin: 0 auto;
  }
  time {
    font-family: var(--font-sansserif);
    font-size: 1rem;
    display: inline-block;
    margin-bottom: 1rem;
  }
  h1 {
    margin: 0;
    font-size: 3rem;
    line-height: 1.2;
    font-family: var(--font-monospace);
  }
</style>
